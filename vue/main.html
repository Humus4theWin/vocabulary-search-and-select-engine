<script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>

<div id="app">
    <div>
        <h1>Frontend Search</h1>
        <div v-for="vocab in vocabStore">
            <div>
                {{ vocab }}
            </div>
        </div>
        <button v-on:click="searchData"> 
        </button>
    </div>
</div>


<script>
 var app = new Vue({
        el: '#app',
        data: {
            vocabList: [],
            vocabStore: []
        },
        // load all vocabs
        async created (){
            await this.getVocabList()
            await this.getAllVocabs()
        },
        watch:{
            vocabList:function(val){
                console.log(val)
             },
             vocabStore:function(val){
                console.log(val)
             }
        },
        methods: {
            getVocabList(){
                return fetch('/vocabs')
                .then(data => data.json())
                .then(json => this.vocabList = json);
            },
            getVocab(vocabPath){
                return fetch(vocabPath)
                .then(data => data.json())
                .then(json => this.vocabStore = json)
                .catch(err => console.log(err))
            },
            getAllVocabs(){
                let promises =  this.vocabList.map(element => {
                    this.getVocab(element)       
                });
                return Promise.all(promises)
            },
            searchData(){
                    console.log("search")
            }
        }
    })
</script>